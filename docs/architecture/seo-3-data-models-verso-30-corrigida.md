# Seção 3: Data Models (Versão 3.0 - Corrigida)
Decisão de Arquitetura - Chaves Primárias: Todas as chaves primárias (id) serão do tipo INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY no banco de dados PostgreSQL. Consequentemente, em todas as interfaces TypeScript, o tipo do id será number.
**1. Aluno**
```typescript
interface Aluno {
id: number; // Integer Primary Key
nomeCompleto: string;
dataNascimento: Date;
sexo: 'Masculino' | 'Feminino';
cpf?: string;
nis?: string;
}
```

**2. Turma**
```typescript
interface Turma {
  id: number; // Integer Primary Key
  anoLetivo: number;
  nome: string;
  periodo: 'Manhã' | 'Tarde' | 'Integral' | 'Noite';
  escolaId: number; // Foreign Key
}
```

**3. Matricula**
```typescript
interface Matricula {
  id: number; // Integer Primary Key
  alunoId: number; // Foreign Key
  turmaId: number; // Foreign Key
}
```
**4. Avaliacao (O "Evento" ou "Atendimento" Mestre)**
```typescript
interface Avaliacao {
  id: number;
  matriculaId: number;
  avaliadorId: number;
  dataAvaliacao: Date;
  alunoAusente: boolean;
  // Chaves estrangeiras opcionais para os resultados específicos.
  // Um único evento de Avaliação pode ter um ou mais tipos de resultados.
  avaliacaoVisualId?: number;
  avaliacaoAntropometricaId?: number;
  avaliacaoOdontologicaId?: number;
}
```

**Nota de Indexação:** A tabela `Avaliacao` deve ter um índice composto em `(matriculaId, dataAvaliacao)` para otimizar a busca de avaliações de um aluno em ordem cronológica. Múltiplas avaliações por aluno por ano são permitidas para suportar reavaliações e testes longitudinais.

**5. AvaliacaoVisual (Resultados Específicos da Visão)**
```typescript
interface AvaliacaoVisual {
  id: number;
  olhoDireito: number;  // CHECK: valor entre 0.0 e 1.0
  olhoEsquerdo: number; // CHECK: valor entre 0.0 e 1.0
  reteste?: number;     // CHECK: valor entre 0.0 e 1.0 (quando presente)
}
```

**Restrições de Validação:** A tabela `AvaliacaoVisual` deve implementar constraints CHECK em nível de banco de dados para garantir que `olhoDireito`, `olhoEsquerdo` e `reteste` estejam sempre entre 0.0 e 1.0, representando valores de acuidade visual válidos.

**6. AvaliacaoAntropometrica (Resultados Específicos da Antropometria)**
```typescript
interface AvaliacaoAntropometrica {
  id: number;
  pesoKg: number;
  alturaCm: number;
  classificacaoCDC?: string; // Armazenado opcionalmente para performance
}
```
**7. AvaliacaoOdontologica (Resultados Específicos de Odonto)**
```typescript
interface AvaliacaoOdontologica {
  id: number;
  risco: string;
  atfRealizado: boolean;
  necessitaART: boolean;
  artQuantidadeDentes?: number;
  escovacaoOrientadaRealizada: boolean;
}
```

